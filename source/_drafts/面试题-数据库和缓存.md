---
title: 面试题|数据库和缓存
tags:
---

<!-- more -->

## SQL

### 1 常见的关系型数据库与非关系型数据库都有哪些

关系型数据库：MySQL，Oracle， sql server， db2， sybase

非关系型数据库：

Mongodb是一个高性能，开源，无模式的文档型数据库，开发语言是cpp， 它在许多场景下可用于替代传统的关系型数据库或键值存储方式

redis是一个开源的使用 ansi C 语言编写，支持网络、可基于内存亦可持久化的日志型、key-value数据库，并提供多种语言的API。目前由vmware主持开发

### 2 MySQL 常见数据库引擎比较

InnoDB  

- 支持事务
- 支持表锁、行锁（for update）
- 表锁：select * from tb for update
- 行锁：select id, name from tb where id=2 for update

myisam

- 查询速度快
- 全文索引
- 支持表锁
- 表锁：select * from tb where id=2 for update

NDB

- 高可用、高性能、高扩展性的数据库集群系统

Memory

- 默认是使用哈希索引

### 3 简述数据库三大范式

数据库的三大特征

- 实体：表
- 属性：表中的数据
- 关系：表与表之间的关系

数据库设计的三大范式

1. 确保每列保持原子性(即数据库表中的所有字段值都是不可分解的原子值)
2. 确保表中的每列都是和主键相关(表中只能保存一种数据，不可以把多种数据保存在同一张表中)--->完全属于当表的数据
3. 确保每列都和主键直接相关而不是间接相关(在一个数据库表中保存的数据只能与主键相关)--->消除传递依赖(间接)

比如在设计一个订单数据表的时候，可以将客户编号作为一个外键和订单表建立相应的关系。而不可以在订单表中添加关于客户其它信息（比如姓名、所属公司等）的字段

### 4 数据库五大约束

1. PRIMARY KEY：设置主键约束
2. UNIQUE：设置唯一性约束
3. DEFAULT：默认值约束
4. NOT NULL：非空约束
5. FOREIGN KEY：外键约束

### 5 常见sql

GROUP BY

SQL 的 LEFT JOIN、RIGHT JOIN、INNER JOIN 之间的区别

- LEFT JOIN：返回包括左表中所有记录和右表中连接字段相等的记录
- RIGHT JOIN：返回包括右表中所有记录和左表中连接字段相等的记录
- INNER JOIN：只返回两个表中连接字段相等的行

### 6 数据库优化方案

1. 创建数据库表时将固定长度的放在前面
2. 将固定数据放进内存(例如choice字段)
3. char 和 varchar 的区别，一个长度不可变，一个长度可变
4. 联合索引遵循最左前缀(从最左侧进行检索)
5. 避免使用 select *
6. 读写分离：两台服务器同步数据，利用数据库的主从分离， 主用于删除、修改、更新；从用于查
7. 分库：当数据库表太多，将某些表分到不同的数据库，例如一万张表的时候，代价是连表查询
8. 分表：水平分表，垂直分表
9. 加缓存
10. 如果只想获取一条数据，请用 limit 1

### 7 解释 orm 中 db first 和 code first 的含义

- db first：先创建数据库再更新表模型
- code first：先写表模型再更新数据库

### 8 orm 的实现原理

- 映射类：描述数据库表结构
- 映射文件：指定数据库表和映射类之间的关系
- 数据库配置文件：指定数据库连接时需要的连接信息(数据库，登录用户名， 密码or连接字符串)

### 9 什么是活锁，什么是死锁

活锁就是事务T有可能永远等待，而死锁是指T1和T2 两个事务永远不能结束

### 10 数据库管理系统（DBMS）是一种应用软件吗

才不是，数据库管理系统是位于用户和操作系统之间的一层数据管理软件是系统软件

## Redis

### 1 

